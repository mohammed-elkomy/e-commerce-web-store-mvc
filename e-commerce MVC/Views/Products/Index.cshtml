@using ECommerce.Models
@using ECommerce.Models.NewDb
@using ECommerce.Models.ViewModels
@model IEnumerable<Product>

<div class="products">
    <div class="container">
        <div class="col-md-4 products-left">
            <div class="filter-price animated  slideInUp">
                <h3>Filter By Price</h3>
                <ul class="dropdown-menu1">
                    <li>
                        <a href="">
                            <div id="slider-range"></div>
                            <input type="text" id="amount" style="border: 0" />
                        </a>
                    </li>
                </ul>
                <script type="text/javascript" src="/js/jquery-ui.min.js"></script>
                <!---->
            </div>
            <div class="categories animated  slideInUp">
                <h3>Categories</h3>
                <div id="categories">
                    <ul class="cate">
                        @{
                            foreach (var category in (ViewData["CategoryTree"] as CategoryTreeEntry)?.Children)
                            {
                                @Html.Partial("CategoryEntryPartialView",category)
                            }
                        }
                        @*<li><a href="products.html">Best Selling</a> <span>(15)</span></li>
                        <li><a href="products.html">Man</a> <span>(16)</span></li>
                        <ul>
                            <li><a href="products.html">Accessories</a> <span>(2)</span></li>
                            <li><a href="products.html">Coats & Jackets</a> <span>(5)</span></li>
                            <li><a href="products.html">Jeans</a> <span>(1)</span></li>
                            <li><a href="products.html">New Arrivals</a> <span>(0)</span></li>
                            <li><a href="products.html">Suits</a> <span>(1)</span></li>
                            <li><a href="products.html">Casual Shirts</a> <span>(0)</span></li>
                        </ul>
                        <li><a href="products.html">Sales</a> <span>(15)</span></li>
                        <li><a href="products.html">Woman</a> <span>(15)</span></li>
                        <ul>
                            <li><a href="products.html">Accessories</a> <span>(2)</span></li>
                            <li><a href="products.html">New Arrivals</a> <span>(0)</span></li>
                            <li><a href="products.html">Dresses</a> <span>(1)</span></li>
                            <li><a href="products.html">Casual Shirts</a> <span>(0)</span></li>
                            <li><a href="products.html">Shorts</a> <span>(4)</span></li>
                        </ul>*@
                    </ul>
                </div>
            </div>
            <div class="new-products animated  slideInUp">
                <h3>New Products</h3>
                <div class="new-products-grids">
                    <div class="new-products-grid">
                        <div class="new-products-grid-left">
                            <a href="single.html"><img src="/images/6.jpg" alt=" " class="img-responsive" /></a>
                        </div>
                        <div class="new-products-grid-right">
                            <h4><a href="single.html">occaecat cupidatat</a></h4>
                            <div class="rating">
                                <div class="rating-left">
                                    <img src="/images/2.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/2.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/2.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/1.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/1.png" alt=" " class="img-responsive">
                                </div>
                                <div class="clearfix"> </div>
                            </div>
                            <div class="simpleCart_shelfItem new-products-grid-right-add-cart">
                                <p> <span class="item_price">$180</span><a class="item_add" href="#">add to cart </a></p>
                            </div>
                        </div>
                        <div class="clearfix"> </div>
                    </div>
                    <div class="new-products-grid">
                        <div class="new-products-grid-left">
                            <a href="single.html"><img src="/images/26.jpg" alt=" " class="img-responsive" /></a>
                        </div>
                        <div class="new-products-grid-right">
                            <h4><a href="single.html">eum fugiat quo</a></h4>
                            <div class="rating">
                                <div class="rating-left">
                                    <img src="/images/2.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/2.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/2.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/1.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/1.png" alt=" " class="img-responsive">
                                </div>
                                <div class="clearfix"> </div>
                            </div>
                            <div class="simpleCart_shelfItem new-products-grid-right-add-cart">
                                <p> <span class="item_price">$250</span><a class="item_add" href="#">add to cart </a></p>
                            </div>
                        </div>
                        <div class="clearfix"> </div>
                    </div>
                    <div class="new-products-grid">
                        <div class="new-products-grid-left">
                            <a href="single.html"><img src="/images/11.jpg" alt=" " class="img-responsive" /></a>
                        </div>
                        <div class="new-products-grid-right">
                            <h4><a href="single.html">officia deserunt</a></h4>
                            <div class="rating">
                                <div class="rating-left">
                                    <img src="/images/2.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/2.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/2.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/1.png" alt=" " class="img-responsive">
                                </div>
                                <div class="rating-left">
                                    <img src="/images/1.png" alt=" " class="img-responsive">
                                </div>
                                <div class="clearfix"> </div>
                            </div>
                            <div class="simpleCart_shelfItem new-products-grid-right-add-cart">
                                <p> <span class="item_price">$259</span><a class="item_add" href="#">add to cart </a></p>
                            </div>
                        </div>
                        <div class="clearfix"> </div>
                    </div>
                </div>
            </div>
            @{
                if (ViewData["Ad"] is Advertisement ad)
                {
                    <div class="men-position animated  slideInUp" SpecialOffer>
                        <a href="@ad.Url"><img src="/images/Ads/@ad.Id" alt=" " class="img-responsive" /></a>
                        <div class="men-position-pos">
                            <h4>@ad.Caption</h4>
                        </div>
                    </div>
                }
            }
        </div>
        <div class="col-md-8 products-right">
            <div class="products-right-grid">
                <div class="products-right-grids animated  slideInRight">
                    <div class="sorting">
                        <button id="btn-search">Search</button>
                    </div>
                    <div class="sorting">
                        <select id="orderBy" class="frm-field required sect">
                            @foreach (var ord in Enum.GetNames(typeof(OrderBy)))
                            {
                                <option value="@Enum.Parse(typeof(OrderBy),ord)">@ord</option>
                            }
                        </select>
                    </div>
                    <div class="sorting-left">
                        <select id="perPage" class="frm-field required sect">
                            <option value="9">Item on page 9</option>
                            <option value="15">Item on page 15</option>
                            <option value="21">Item on page 21</option>
                            <option value="27">Item on page 27</option>
                            <option value="33">Item on page 33</option>
                        </select>
                    </div>
                    <div class="clearfix"> </div>
                </div>
                <div class="products-right-grids-position animated  slideInRight">
                    <img src="/images/18.jpg" alt=" " class="img-responsive" />
                    <div class="products-right-grids-position1">
                        <h4>2016 New Collection</h4>
                        <p>Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae.</p>
                    </div>
                </div>
            </div>
            <div id="searchContent" class="products-right-grids-bottom">
                @{
                    var groups = Model.Select((o, i) => (i, o)).GroupBy(o => o.Item1 / 3);
                    foreach (var group in groups)
                    {
                        <div class="col-md-4 products-right-grids-bottom-grid">
                            @foreach ((int, Product) tuple in group)
                            {
                                var product = tuple.Item2;
                                <div class="new-collections-grid1 products-right-grid1 animated slideInUp product-holder" data-id="@product.Id">
                                    <div class="new-collections-grid1-image">
                                        <a asp-controller="Products" asp-action="Single" asp-route-id="@product.Id">
                                            <img src="/images/products/@(product.Id).jpg" alt=" " class="img-responsive">
                                        </a>
                                        <div class="new-collections-grid1-image-pos products-right-grids-pos">
                                            <a asp-controller="Products" asp-action="Single" asp-route-id="@product.Id">
                                                Quick View
                                            </a>
                                        </div>
                                        <div class="new-collections-grid1-right products-right-grids-pos-right">
                                            <div class="rating">
                                                @foreach (var image in product.Images)
                                                {
                                                    <div class="rating-left">
                                                        <img src="@image.Url" alt=" " class="img-responsive" />
                                                    </div>
                                                }
                                                <div class="clearfix"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <h4><a asp-controller="Products" asp-action="Single" asp-route-id="@product.Id"> @product.Name</a></h4>
                                    <p>@product.ShortDescription</p>
                                    <div class="simpleCart_shelfItem products-right-grid1-add-cart">
                                        <p>
                                            <i></i>
                                            <span class="item_price">@product.Price</span>
                                            <a asp-controller="Cart" asp-action="AddToCart" asp-route-id="@product.Id" asp-route-quantity="1" class="item_add" data-id="@product.Id"></a>
                                        </p>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                }
                <div class="clearfix"></div>
            </div>
            <nav class="numbering animated  slideInRight">
                <ul id="pagination" class="pagination paging"></ul>
            </nav>
        </div>
        <div class="clearfix"> </div>
    </div>
</div>


@section Scripts{
    <script src="/js/jquery.twbsPagination.min.js"></script>
    <script>
        $(function () {
            var minPrice = 0, maxPrice = 1000000;
            $("#slider-range").slider({
                range: true,
                min: 0,
                max: 100000,
                values: [0, 100000],
                slide: function (event, ui) {
                    $("#amount").val("$" + ui.values[0] + " - $" + ui.values[1]);
                },
                stop: function (event, ui) {
                    minPrice = ui.values[0];
                    maxPrice = ui.values[1];
                }
            });
            $("#amount")
                .val("$" + $("#slider-range").slider("values", 0) + " - $" + $("#slider-range").slider("values", 1));

        });
    </script>
}